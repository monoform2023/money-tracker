<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–£—á–µ—Ç –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container mt-5">
    <h1 class="text-center mb-4">–£—á–µ—Ç –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤</h1>

    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</h5>
        <div class="row g-3">
          <div class="col-md-4">
            <input type="text" id="description" class="form-control" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
          </div>
          <div class="col-md-2">
            <input type="number" id="amount" class="form-control" placeholder="–°—É–º–º–∞">
          </div>
          <div class="col-md-2">
            <select id="type" class="form-select">
              <option value="income">–î–æ—Ö–æ–¥</option>
              <option value="expense" selected>–†–∞—Å—Ö–æ–¥</option>
            </select>
          </div>
          <div class="col-md-2">
            <select id="payment" class="form-select">
              <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
              <option value="card" selected>–ë–µ–∑–Ω–∞–ª</option>
            </select>
          </div>
          <div class="col-md-2">
            <button id="addTransaction" class="btn btn-primary w-100">–î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
        </div>
        
        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –≤–∏–¥–µ —Ç–∞–±–æ–≤ -->
        <div class="mt-3">
          <label class="form-label mb-2">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
          
          <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∏–¥–∏–º—ã–µ —Ç–∞–±—ã -->
          <div class="category-tabs" id="categoryTabs">
            <button type="button" class="category-tab" data-category="–ó–ü">–ó–ü</button>
            <button type="button" class="category-tab" data-category="–ê—Ä–µ–Ω–¥–∞">–ê—Ä–µ–Ω–¥–∞</button>
            <button type="button" class="category-tab" data-category="–î–æ—Å—Ç–∞–≤–∫–∞">–î–æ—Å—Ç–∞–≤–∫–∞</button>
            <button type="button" class="category-tab" data-category="–°–±–æ—Ä–∫–∞">–°–±–æ—Ä–∫–∞</button>
            <button type="button" class="category-tab" data-category="–ú–∞—Ç–µ—Ä–∏–∞–ª—ã">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</button>
            <button type="button" class="category-tab" data-category="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</button>
          </div>
          
          <!-- –°–∫—Ä—ã—Ç—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
          <div class="category-tabs-extra" id="categoryTabsExtra" style="display: none;">
            <button type="button" class="category-tab" data-category="–†–µ–∫–ª–∞–º–∞ –∏ —Å–µ—Ä–≤–∏—Å—ã">–†–µ–∫–ª–∞–º–∞</button>
            <button type="button" class="category-tab" data-category="–•–æ–∑—Ä–∞—Å—Ö–æ–¥—ã">–•–æ–∑—Ä–∞—Å—Ö–æ–¥—ã</button>
            <button type="button" class="category-tab" data-category="–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ">–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ</button>
            <button type="button" class="category-tab" data-category="–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏">–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏</button>
            <button type="button" class="category-tab" data-category="–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</button>
            <button type="button" class="category-tab" data-category="–ù–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã">–ù–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã</button>
            <button type="button" class="category-tab" data-category="–ù–∞–ª–æ–≥–∏">–ù–∞–ª–æ–≥–∏</button>
          </div>
          
          <!-- –ö–Ω–æ–ø–∫–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è -->
          <div class="text-center mt-2">
            <button type="button" class="btn-expand-categories" id="expandCategoriesBtn">
              <i class="bi bi-chevron-down"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- –ë–∞–ª–∞–Ω—Å—ã -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">–ë–∞–ª–∞–Ω—Å—ã</h5>
        <div class="row">
          <div class="col-md-4">
            <p>–ù–∞–ª–∏—á–Ω—ã–µ: <span id="cashBalance" class="fw-bold">0 ‚ÇΩ</span></p>
          </div>
          <div class="col-md-4">
            <p>–ë–µ–∑–Ω–∞–ª: <span id="cardBalance" class="fw-bold">0 ‚ÇΩ</span></p>
          </div>
          <div class="col-md-4">
            <p>–û–±—â–∏–π –±–∞–ª–∞–Ω—Å: <span id="totalBalance" class="fw-bold">0 ‚ÇΩ</span></p>
          </div>
        </div>
      </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title d-flex justify-content-between align-items-center">
          –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
          <button id="toggleTransactions" class="btn btn-sm btn-outline-secondary">
            –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å
          </button>
        </h5>
        <ul id="transactionList" class="list-group"></ul>
      </div>
    </div>

    <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">–§–∏–ª—å—Ç—Ä—ã</h5>
        <div class="row g-3">
          <div class="col-md-3">
            <input type="text" id="search" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é">
          </div>
          <div class="col-md-2">
            <select id="filterType" class="form-select">
              <option value="all">–í—Å–µ</option>
              <option value="income">–î–æ—Ö–æ–¥</option>
              <option value="expense">–†–∞—Å—Ö–æ–¥</option>
            </select>
          </div>
          <div class="col-md-2">
            <input type="date" id="startDate" class="form-control">
          </div>
          <div class="col-md-2">
            <input type="date" id="endDate" class="form-control">
          </div>
          <div class="col-md-2">
            <button id="filter" class="btn btn-secondary w-100">–§–∏–ª—å—Ç—Ä</button>
          </div>
          <div class="col-md-1">
            <button id="resetFilter" class="btn btn-outline-secondary w-100">–°–±—Ä–æ—Å</button>
          </div>
        </div>
        <div class="mt-3">
          <button id="export" class="btn btn-success">–≠–∫—Å–ø–æ—Ä—Ç –≤ XLSX</button>
          <button id="archiveBtn" class="btn btn-warning ms-2">–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</button>
          <button id="viewArchivesBtn" class="btn btn-info ms-2">–ü—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ö–∏–≤–æ–≤</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞—Ä—Ö–∏–≤–æ–≤ -->
  <div class="modal fade" id="archivesListModal" tabindex="-1" aria-labelledby="archivesListModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="archivesListModalLabel">üì¶ –ê—Ä—Ö–∏–≤—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="archivesList" class="list-group">
            <!-- –°–ø–∏—Å–æ–∫ –∞—Ä—Ö–∏–≤–æ–≤ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ -->
  <div class="modal fade" id="archiveModal" tabindex="-1" aria-labelledby="archiveModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="archiveModalLabel">‚ö†Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç–µ–∫—É—â–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏?</p>
          <p class="text-muted mb-0">–í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: <strong id="transactionCount">0</strong></p>
          <p class="text-muted">–ü–æ—Å–ª–µ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω, –Ω–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤–µ.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="button" class="btn btn-warning" id="confirmArchive">–î–∞, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
  <script src="app.js"></script>
</body>
</html>